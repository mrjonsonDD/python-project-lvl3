define(["require","exports","OK/utils/dom"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="toolbar_dropdown_w_hover",i=function(){var e=this;this.closeDropdown=function(){window.setTimeout((function(){e.element.classList.remove(n),document.removeEventListener("mousedown",e.documentClick,!1)}),e.closeTimeout)},this.documentClick=function(n){var i=!1;n.target instanceof Element&&(e.element.contains(n.target)?t.parent(n.target,"u-menu_a",e.element,!0)&&(i=!0):i=!0),i&&e.closeDropdown()},this.cardClick=function(){e.element.classList.contains(n)?e.closeDropdown():(e.element.classList.add(n),document.addEventListener("mousedown",e.documentClick,!1)),e.isBubbleHidden||(e.isBubbleHidden=!0,window.navigateOnUrlFromJS(e.closeBubbleHandle))},this.mouseEnterHandler=function(){window.clearTimeout(e.timeoutHandle)},this.mouseLeaveHandler=function(){window.clearTimeout(e.timeoutHandle),e.timeoutHandle=window.setTimeout(e.closeDropdown,700)}};i.prototype.activate=function(e){this.element=e,this.closeTimeout=parseInt(this.element.getAttribute("data-timeout"),10),this.card=t.firstByClass(this.element,"js-toolbar-menu"),this.timeoutHandle=null,this.dropdown=t.firstByClass(this.element,"toolbar_dropdown"),this.closeBubbleHandle=this.element.getAttribute("data-hide-dropdown"),this.isBubbleHidden=!this.closeBubbleHandle,this.card.addEventListener("click",this.cardClick,!1),this.element.addEventListener("mouseenter",this.mouseEnterHandler,!1),this.element.addEventListener("mouseleave",this.mouseLeaveHandler,!1)},i.prototype.deactivate=function(e){this.card.removeEventListener("click",this.cardClick,!1),document.removeEventListener("mousedown",this.documentClick),this.element.removeEventListener("mouseenter",this.mouseEnterHandler,!1),this.element.removeEventListener("mouseleave",this.mouseLeaveHandler,!1)},e.default=i}));
//# sourceMappingURL=/res/source-maps/js/app/Toolbar.js.map