define(["OK/utils/dom","OK/autofocus","OK/capture"],(function(t,e,i){"use strict";var s="__active";function o(){this.options={closable:"0",resetActiveItems:"1",autofocus:"",resetLoaderHook:!1},this._activeItems=[],this._toogle=this._toogle.bind(this),this._loaders=[]}return o.prototype={_show:function(){if("1"===this.options.resetActiveItems){var e=this._activeItems;t.byClass(this._filter,"filter_i").forEach((function(t){t.classList.contains(s)&&(e.push(t),t.classList.remove(s))}))}this._el.classList.add(s),this._toogleNext(),this._filter.classList.add("__search-visible"),"true"===this.options.resetLoaderHook&&this._loaders.forEach((function(t){i.deactivate(t,!0)}))},_toogleNext:function(){for(var t=this._filter.nextElementSibling,i=this.options.autofocus;t;)t.classList.toggle("invisible"),t=t.nextElementSibling;i&&(i=this._filter.parentNode.querySelector(i))&&e.activate(i)},_hide:function(){"0"!==this.options.closable&&(this._activeItems.forEach((function(t){t.classList.add(s)})),this._activeItems=[],this._el.classList.remove(s),this._toogleNext(),this._filter.classList.remove("__search-visible"),"true"===this.options.resetLoaderHook&&this._loaders.forEach((function(t){i.activate(t)})))},_toogle:function(t){var e=this._el;t.preventDefault(),e.classList.contains(s)?this._hide():this._show()},_initOptions:function(t){Object.assign(this.options,t)},_findLoaders:function(){var t=this._filter.parentNode.querySelectorAll(".hookBlock .loader-container");this._loaders=Array.prototype.slice.call(t)},_handleLinkClick:function(t){const e=t.currentTarget.getAttribute("href");window.navigateOnUrlFromJS?window.navigateOnUrlFromJS(e):window.location.href=e,t.preventDefault()},activate:function(e){this._el=e,e.getAttribute("href")?e.addEventListener("click",this._handleLinkClick):(this._initOptions(e.dataset),this._filter=t.parent(e,"filter"),this._filter&&(e.addEventListener("click",this._toogle),"true"===this.options.resetLoaderHook&&this._findLoaders()))},deactivate:function(){this._el.removeEventListener("click",this._toogle),this._el.removeEventListener("click",this._handleLinkClick),OK.util.clean(this)}},o}));
//# sourceMappingURL=/res/source-maps/js/app/GoSearch.js.map